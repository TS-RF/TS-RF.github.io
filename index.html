<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title data-i18n="title">TSRF: Explainable Fault Diagnosis for Marine Diesel Engines</title>
  <meta name="description" content="TSRF: A Physics-Informed Machine Learning (PIML) approach for Marine Diesel Engine Fault Diagnosis.">
  <meta name="keywords" content="Marine Diesel Engine, Fault Diagnosis, Random Forest, SHAP, Explainable AI, Mechanism Model">
  
  <meta property="og:title" content="TSRF: Explainable Fault Diagnosis for Marine Diesel Engines">
  <meta property="og:image" content="https://ts-rf.github.io/static/images/fig1_structure.jpg">
  <meta property="og:url" content="https://ts-rf.github.io/">
  <meta name="twitter:card" content="summary_large_image">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/favicon.svg">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
  
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/xcode.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <style>
    .keyword-label { font-weight: bold; margin-right: 10px; vertical-align: middle; color: #363636; }
    .tags .tag { transition: all 0.2s ease; font-size: 0.9rem; }
    .tags .tag:hover { background-color: #3273dc; color: #fff; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(50, 115, 220, 0.2); }
    .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1); }
    .reveal.active { opacity: 1; transform: translateY(0); }
    .reveal.delay-1 { transition-delay: 0.1s; }
    .reveal.delay-2 { transition-delay: 0.2s; }
    .hover-card { transition: transform 0.3s ease, box-shadow 0.3s ease; will-change: transform; }
    .hover-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px -10px rgba(0,0,0,0.2); }
    .highlight-list li { background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid #3273dc; }
    [dir="rtl"] .highlight-list li { border-left: none; border-right: 4px solid #3273dc; }
    .stagger-wrapper .stagger-item { opacity: 0; transform: translateX(-20px); transition: all 0.6s ease-out; }
    .stagger-wrapper.active .stagger-item { opacity: 1; transform: translateX(0); }
    .stagger-wrapper.active .stagger-item:nth-child(1) { transition-delay: 0.1s; }
    .stagger-wrapper.active .stagger-item:nth-child(2) { transition-delay: 0.3s; }
    .stagger-wrapper.active .stagger-item:nth-child(3) { transition-delay: 0.5s; }
  </style>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ScholarlyArticle",
    "headline": "Thermodynamic simulation-assisted random forest",
    "image": ["https://ts-rf.github.io/static/images/fig1_structure.jpg"],
    "datePublished": "2025-01-01",
    "author": [{"@type": "Person", "name": "Minghang Zhao"}],
    "publisher": {"@type": "Organization", "name": "Elsevier Measurement"}
  }
  </script>
</head>
<body>

<nav class="navbar" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
      <span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu">
    <div class="navbar-start" style="flex-grow: 1; justify-content: center;">
      <a class="navbar-item" href="https://scholar.google.com/citations?hl=zh-CN&user=k82TzLwAAAAJ" target="_blank">
        <span class="icon" style="margin-right: 0.3rem;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/c/c7/Google_Scholar_logo.svg" alt="Google Scholar" style="height: 20px; width: 20px;">
        </span>
        <span data-i18n="nav_scholar">Minghang Zhao (Google Scholar)</span>
      </a>
    </div>
    <div class="navbar-end">
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          <span class="icon" style="margin-right: 5px;"><i class="fas fa-globe"></i></span>
          <span id="current-lang-label">English</span>
        </a>
        <div class="navbar-dropdown is-right" id="language-dropdown" style="max-height: 400px; overflow-y: auto;">
          </div>
      </div>
    </div>
  </div>
</nav>

<section class="hero reveal"> 
  <div class="hero-body" style="padding-top: 1rem;">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title" data-i18n="title">Thermodynamic simulation-assisted random forest: Towards explainable fault diagnosis of combustion chamber components of marine diesel engines</h1>
          
          <div class="is-size-5 publication-authors">
            <span class="author-block"><strong>Congcong Luo</strong><sup>a</sup>,</span>
            <span class="author-block">
              <a href="https://homepage.hit.edu.cn/zhaominghang?lang=zh" target="_blank" style="color: #3273dc; text-decoration: underline;"><strong>Minghang Zhao</strong></a><sup>a,*</sup>,
            </span>
            <span class="author-block"><strong>Xuyun Fu</strong><sup>a</sup>,</span>
            <span class="author-block"><strong>Shisheng Zhong</strong><sup>a</sup>,</span>
            <span class="author-block"><strong>Song Fu</strong><sup>b</sup>,</span>
            <span class="author-block"><strong>Kai Zhang</strong><sup>c</sup>,</span>
            <span class="author-block"><strong>Xiaoxia Yu</strong><sup>d</sup></span>
          </div>

          <div class="is-size-6 publication-authors" style="font-size: 0.8rem; line-height: 1.5;">
            <span class="author-block"><sup>a</sup><span data-i18n="affiliations_a">Department of Mechanical Engineering, Harbin Institute of Technology, Weihai 264209, China</span></span><br>
            <span class="author-block"><sup>b</sup><span data-i18n="affiliations_b">School of Mechatronics Engineering, Harbin Institute of Technology, Harbin 150001, China</span></span><br>
            <span class="author-block"><sup>c</sup><span data-i18n="affiliations_c">School of Mechanical Engineering, Southwest Jiaotong University, Chengdu 610031, China</span></span><br>
            <span class="author-block"><sup>d</sup><span data-i18n="affiliations_d">College of Mechanical Engineering, Chongqing University of Technology, Chongqing 400054, China</span></span>
          </div>

          <div class="column has-text-centered">
            <div class="publication-links">
              <span class="link-block">
                <a href="https://doi.org/10.1016/j.measurement.2025.117252" class="button is-normal is-rounded is-dark hover-card" target="_blank">
                  <span class="icon"><i class="fas fa-file-pdf"></i></span>
                  <span data-i18n="nav_paper">Paper</span>
                </a>
              </span>
              <span class="link-block">
                <a href="https://github.com/815177491/TSRF.github.io/releases/tag/DATA" target="_blank" class="button is-normal is-rounded is-dark hover-card">
                  <span class="icon"><i class="fas fa-file-csv"></i></span>
                  <span data-i18n="nav_dataset">Dataset</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" style="padding-top: 0rem;">
    <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3 reveal" data-i18n="abstract_title">Abstract</h2>
        <div class="content has-text-justified reveal delay-1">
          <p data-i18n="abstract_p1">Aiming at the challenges that traditional intelligent fault diagnosis methods of marine diesel engines often suffer low generalizability...</p>
          <p data-i18n="abstract_p2">The method reveals fault characteristics through thermodynamic simulations and incorporates them as prior knowledge...</p>
          <p data-i18n="abstract_p3">By calculating SHapley Additive explanations (SHAP) values, a parameter selection process is conducted...</p>
          <div class="keywords-container" style="margin-top: 2rem;">
            <span class="keyword-label" data-i18n="keywords_label">Keywords:</span>
            <div class="tags is-inline-block">
              <span class="tag is-light is-info">Marine Diesel Engine</span>
              <span class="tag is-light is-info">Fault Diagnosis</span>
              <span class="tag is-light is-info">Explainable AI</span>
              <span class="tag is-light is-info">SHAP</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
</section>

<section class="section" style="padding-top: 1rem;">
  <div class="container is-max-desktop">
    
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3 reveal" data-i18n="motivation_title">Motivation</h2>
        <div class="content has-text-justified reveal delay-1">
          <p data-i18n="motivation_p1">In the fields of marine engineering and Prognostics and Health Management (PHM), the industry faces two persistent bottlenecks:</p>
          <ul>
            <li><strong data-i18n="motivation_li1">Data Scarcity: Marine engines are high-value assets that are rarely operated to failure...</strong></li>
            <li><strong data-i18n="motivation_li2">The "Black Box" Problem: Deep learning models often lack transparency...</strong></li>
          </ul>
          <p data-i18n="motivation_p2">To overcome these challenges, we introduce TSRF...</p>
        </div>
      </div>
    </div>
    <hr>

    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3 reveal" data-i18n="methodology_title">Methodology</h2>
        <div class="content has-text-justified reveal delay-1">
          <p data-i18n="methodology_intro">Our workflow consists of four distinct stages, as illustrated below:</p>
          <ol>
            <li><strong data-i18n="method_1_title">Thermodynamic Modeling:</strong> <span data-i18n="method_1_text">Rather than relying solely on physical test rigs, we constructed a high-fidelity 1-D thermodynamic model...</span></li>
            <li><strong data-i18n="method_2_title">Fault Injection:</strong> <span data-i18n="method_2_text">Using the calibrated model, we simulated five specific combustion chamber faults...</span></li>
            <li><strong data-i18n="method_3_title">Feature Selection via SHAP:</strong> <span data-i18n="method_3_text">We utilized SHAP values to quantitatively identify the critical features...</span></li>
            <li><strong data-i18n="method_4_title">Classification:</strong> <span data-i18n="method_4_text">A Random Forest (RF) classifier was trained using this physics-enhanced dataset...</span></li>
          </ol>
        </div>
        <div class="has-text-centered reveal delay-2">
          <img src="./static/images/fig1_structure.jpg" class="hover-card" alt="Structure of TSRF" style="width:100%; height:auto; border-radius: 10px;">
          <p class="subtitle is-6"><strong data-i18n="fig1_label">Figure 1:</strong> <span data-i18n="fig1_caption">The structure of our proposed TSRF method.</span></p>
        </div>
      </div>
    </div>
    <hr>

    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3 reveal" data-i18n="thermo_details_title">Thermodynamic Modeling Details</h2>
        <div class="content has-text-justified reveal delay-1">
          <p data-i18n="thermo_details_intro">To ensure high fidelity, we constructed a one-dimensional (1-D) operational cycle simulation...</p>
        </div>
        
        <div class="columns is-centered">
            <div class="column is-6 reveal delay-2">
            <div class="box hover-card" style="height: 100%;">
              <h4 class="title is-4 is-size-5">
                <span class="icon has-text-info" style="margin-right: 8px;"><i class="fas fa-network-wired"></i></span>
                <span data-i18n="topo_title">Model Topology</span>
              </h4>
              <div class="content is-size-6">
                <p data-i18n="topo_intro">The engine is discretized into a network of flow pipes and functional components:</p>
                <ul>
                  <li data-i18n="topo_li1"><strong>Core Power Unit:</strong> 6-cylinder, 2-stroke inline configuration.</li>
                  <li data-i18n="topo_li2"><strong>Air Path System:</strong> Intake/Exhaust manifolds (PL1, PL2) connected via complex piping networks.</li>
                  <li data-i18n="topo_li3"><strong>Boosting System:</strong> Turbocharger (TC1) coupled with an intercooler (CO1).</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="column is-6 reveal delay-3">
            <div class="box hover-card" style="height: 100%;">
              <h4 class="title is-4 is-size-5">
                <span class="icon has-text-success" style="margin-right: 8px;"><i class="fas fa-check-double"></i></span>
                <span data-i18n="calib_title">Calibration & Validation</span>
              </h4>
              <div class="content is-size-6">
                <p data-i18n="calib_intro">Before fault injection, the baseline model was rigorously calibrated against empirical data.</p>
                <ul>
                  <li data-i18n="calib_li1"><strong>Data Source:</strong> Real-world vessel data acquired via Data Collecting Module (DCM).</li>
                  <li data-i18n="calib_li2"><strong>Validation:</strong> The deviation for critical parameters (e.g., Power, Exhaust Temp) was maintained within a <strong>&plusmn;5% error margin</strong>.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="columns is-centered reveal" style="margin-top: 1rem; margin-bottom: 1rem;">
          <div class="column is-8 has-text-centered">
            <div style="height: 320px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
              <img src="./static/images/fig2_simulator.png" class="hover-card" alt="1-D model" style="height: 100%; width: auto; max-width: 100%; object-fit: contain; border-radius: 8px;">
            </div>
            <p class="subtitle is-6"><strong data-i18n="fig2_label">Figure 2:</strong> <span data-i18n="fig2_caption">One-dimensional thermodynamic model of the diesel engine.</span></p>
          </div>
          <div class="column is-4 has-text-centered">
             <div style="height: 320px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
              <img src="./static/images/fig5_faults.jpg" class="hover-card" alt="Model Validation" style="height: 100%; width: auto; max-width: 100%; object-fit: contain; border-radius: 8px;">
            </div>
            <p class="subtitle is-6"><strong data-i18n="fig5_label">Figure 5:</strong> <span data-i18n="fig5_caption">Data Collecting Module (DCM).</span></p>
          </div>
        </div>

        <div class="box hover-card reveal" style="margin-top: 1.5rem;">
          <h4 class="title is-4 is-size-5" style="display: flex; align-items: center; justify-content: center;">
            <span class="icon has-text-black" style="margin-right: 8px;"><i class="fas fa-cogs"></i></span>
            <span data-i18n="fault_mech_title">Fault Injection Mechanism</span>
          </h4>
          <div class="content has-text-justified is-size-6">
            <p data-i18n="fault_mech_intro">Since 1-D models cannot directly represent 3D structural defects, we employed a phenomenological mapping approach...</p>
          </div>
          <div class="table-container">
            <table class="table is-fullwidth is-striped is-hoverable is-size-6">
              <thead><tr style="background-color: #f5f5f5;">
                <th data-i18n="fault_table_h1">Fault Type</th>
                <th data-i18n="fault_table_h2">Physical Mechanism</th>
                <th data-i18n="fault_table_h3">Modeling Implementation</th>
              </tr></thead>
              <tbody>
                <tr><td data-i18n="fault_f1_name"><strong>F1: Head Cracking</strong></td><td data-i18n="fault_f1_mech">Disrupted thermal conduction.</td><td data-i18n="fault_f1_impl">Elevating Cylinder Head Surface Temp to 346&deg;C.</td></tr>
                <tr><td data-i18n="fault_f2_name"><strong>F2: Piston Ablation</strong></td><td data-i18n="fault_f2_mech">Material loss & seal compromise.</td><td data-i18n="fault_f2_impl">Increasing Piston Temp + minor blow-by.</td></tr>
                <tr><td data-i18n="fault_f3_name"><strong>F3: Liner Wear</strong></td><td data-i18n="fault_f3_mech">Abrasive wear increases bore.</td><td data-i18n="fault_f3_impl">Increasing Bore Diameter + substantial blow-by.</td></tr>
                <tr><td data-i18n="fault_f4_name"><strong>F4: Ring Wear</strong></td><td data-i18n="fault_f4_mech">Gas leakage only.</td><td data-i18n="fault_f4_impl">Modulation of Blow-by Mass Flow Rate.</td></tr>
                <tr><td data-i18n="fault_f5_name"><strong>F5: Ring Sticking</strong></td><td data-i18n="fault_f5_mech">Friction & seal failure.</td><td data-i18n="fault_f5_impl">Bore Dia. change + Elevated Liner Temp + Blow-by.</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <hr>
    
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3 reveal" data-i18n="explain_title">Explainability Analysis</h2>
        <div class="content has-text-justified reveal delay-1">
          <p data-i18n="explain_intro">A key innovation of our work is shifting the focus from "What is the fault?" to "Why is this the fault?"...</p>
          <ul>
            <li data-i18n="explain_li1"><strong>Local Interpretation (Waterfall Plot):</strong> The waterfall plot explains specific predictions...</li>
            <li data-i18n="explain_li2"><strong>Global Interpretation (Beeswarm Plot):</strong> Global analysis reveals the general rules learned by the model...</li>
          </ul>
        </div>
        <div class="has-text-centered reveal delay-2">
            <img src="./static/images/fig11_shap.jpg" class="hover-card" alt="SHAP Analysis" style="width:100%; border-radius: 10px;">
            <p class="subtitle is-6"><strong data-i18n="fig11_label">Figure 11:</strong> <span data-i18n="fig11_caption">Fault analysis of piston ring wear (F4) based on SHAP values.</span></p>
        </div>
        <div class="reveal delay-2" style="margin-top: 2rem; margin-bottom: 2rem;">
          <details class="box hover-card" style="background-color: #fcfcfc; border: 1px solid #eee;">
            <summary class="title is-5 is-size-6-mobile" style="cursor: pointer; color: #363636; margin-bottom: 0;">
              <span class="icon has-text-info" style="margin-right: 0.5rem;"><i class="fas fa-code"></i></span>
              <span data-i18n="code_view_text">Click to view SHAP Visualization Code (Python)</span>
            </summary>
            <div class="content has-text-left" style="margin-top: 1.5rem;">
              <pre style="padding: 0; border-radius: 8px; overflow: hidden;"><code class="language-python" style="border-radius: 8px;"># SHAP Visualization Code Example
import shap
import matplotlib.pyplot as plt

# ... (Previous python code logic here) ... 
# (Code blocks usually don't need translation)
</code></pre>
            </div>
          </details>
        </div>
      </div>
    </div>
    <hr>

    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3 reveal" data-i18n="highlights_title">Research Highlights</h2>
        <div class="content has-text-justified reveal delay-1">
          <ul class="highlight-list stagger-wrapper"> 
            <li class="stagger-item hover-card"><strong data-i18n="highlight_1">Performs parameterized modeling of five faults in marine diesel engine combustion chamber.</strong></li>
            <li class="stagger-item hover-card"><strong data-i18n="highlight_2">Evaluated the effectiveness of SHAP method through comparison with multiple feature selection methods.</strong></li>
            <li class="stagger-item hover-card"><strong data-i18n="highlight_3">A novel insight into interpretable fault diagnosis is provided by integrating data-driven method with thermodynamic model.</strong></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section reveal" id="BibTeX" style="padding-top: 0; margin-top: -2rem;">
  <div class="container is-max-desktop content">
    <hr>
    <h2 class="title" data-i18n="citation_title">Citation</h2>
    
    <div class="citation-prompt" data-i18n="citation_prompt">
      <span class="icon is-small" style="margin-right: 0.5rem;"><i class="fas fa-quote-left"></i></span>
      If you find this work useful for your research, please consider citing ðŸ˜Š
    </div>

    <h4 class="title is-5 is-size-6-mobile" style="margin-bottom: 0.5rem; color: #666;">BibTeX</h4>
    <pre style="margin-bottom: 5px; background-color: #fcfcfc; border: 1px solid #e5e5e5; border-radius: 8px; padding: 1.25rem;"><code id="bibtex-source" class="language-latex">@article{luo2025thermodynamic,
  title     = {Thermodynamic simulation-assisted random forest: Towards explainable fault diagnosis of combustion chamber components of marine diesel engines},
  author    = {Luo, Congcong and Zhao, Minghang and Fu, Xuyun and Zhong, Shisheng and Fu, Song and Zhang, Kai and Yu, Xiaoxia},
  journal   = {Measurement},
  volume    = {251},
  pages     = {117252},
  year      = {2025},
  publisher = {Elsevier},
  doi       = {10.1016/j.measurement.2025.117252},
}</code></pre>
    <div class="level is-mobile" style="margin-top: 10px; margin-bottom: 2rem;">
      <div class="level-left">
        <button class="button is-dark is-small is-rounded" onclick="copyText('bibtex-source', this)">
          <span class="icon is-small"><i class="fas fa-copy"></i></span>
          <span class="btn-text">Copy BibTeX</span>
        </button>
      </div>
    </div>

    <h4 class="title is-5 is-size-6-mobile" style="margin-bottom: 0.5rem; color: #666;">Standard Format</h4>
    <div class="box" style="background-color: #fcfcfc; border: 1px solid #e5e5e5; padding: 1.25rem; margin-bottom: 5px;">
      <p id="standard-citation" style="margin-bottom: 0; font-family: 'Times New Roman', Times, serif; font-size: 16px; line-height: 1.5;">
        C. Luo, M. Zhao, X. Fu, S. Zhong, S. Fu, K. Zhang, X. Yu. Thermodynamic simulation-assisted random forest: Towards explainable fault diagnosis of combustion chamber components of marine diesel engines[J]. Measurement, 2025, 251: 117252.
      </p>
    </div>
    <div class="level is-mobile" style="margin-top: 10px;">
      <div class="level-left">
        <button class="button is-dark is-small is-rounded" onclick="copyText('standard-citation', this)">
          <span class="icon is-small"><i class="fas fa-copy"></i></span>
          <span class="btn-text">Copy Text</span>
        </button>
      </div>
    </div>

  </div>
</section>

<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link" href="https://doi.org/10.1016/j.measurement.2025.117252"><i class="fas fa-file-pdf"></i></a>
      <a class="icon-link" href="#" disabled><i class="fab fa-github"></i></a>
    </div>
    <div class="columns is-centered is-vcentered">
      <div class="column is-6">
        <div class="content">
          <p>This website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> License.</p>
          <p>Copyright Â© 2025 Congcong Luo et al. Published in <a href="https://doi.org/10.1016/j.measurement.2025.117252" target="_blank">Measurement</a>.</p>
          <p>Adapted from <a href="https://github.com/nerfies/nerfies.github.io">Nerfies</a>.</p>
          <p style="margin-top: 10px;">
            <img src="https://api.visitorbadge.io/api/visitors?path=ts-rf.github.io&label=Page%20Views&labelColor=%23555555&countColor=%23209cee&style=flat" alt="Page Views">
          </p>
        </div>
      </div>
      <div class="column is-2">
        <div style="width: 200px; height: 180px; margin: 0 auto; overflow: hidden; display: flex; justify-content: center; align-items: center;">
          <script type="text/javascript" id="clstr_globe" src="https://clustrmaps.com/globe.js?d=_zkZv1bfxiqAq8HXllAuUZNIvCYv603-zyA7z-Vpjfw"></script>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
// --- Data and Logic ---

const languages = {
  'en': { name: 'English', dir: 'ltr' },
  'zh-CN': { name: 'ç®€ä½“ä¸­æ–‡', dir: 'ltr' },
  'zh-TW': { name: 'ç¹é«”ä¸­æ–‡', dir: 'ltr' },
  'ar': { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', dir: 'rtl' },
  'cs': { name: 'ÄŒeÅ¡tina', dir: 'ltr' },
  'de': { name: 'Deutsch', dir: 'ltr' },
  'es': { name: 'EspaÃ±ol', dir: 'ltr' },
  'fa': { name: 'ÙØ§Ø±Ø³ÛŒ', dir: 'rtl' },
  'fr': { name: 'FranÃ§ais', dir: 'ltr' },
  'he': { name: '×¢×‘×¨×™×ª', dir: 'rtl' },
  'hi': { name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', dir: 'ltr' },
  'id': { name: 'Indonesia', dir: 'ltr' },
  'it': { name: 'Italiano', dir: 'ltr' },
  'ja': { name: 'æ—¥æœ¬èªž', dir: 'ltr' },
  'ko': { name: 'í•œêµ­ì–´', dir: 'ltr' },
  'nl': { name: 'Nederlands', dir: 'ltr' },
  'pl': { name: 'Polski', dir: 'ltr' },
  'pt': { name: 'PortuguÃªs', dir: 'ltr' },
  'ro': { name: 'RomÃ¢nÄƒ', dir: 'ltr' },
  'ru': { name: 'Ð ÑƒÑÑÐºÐ¸Ð¹', dir: 'ltr' },
  'sv': { name: 'Svenska', dir: 'ltr' },
  'th': { name: 'à¹„à¸—à¸¢', dir: 'ltr' },
  'tr': { name: 'TÃ¼rkÃ§e', dir: 'ltr' },
  'uk': { name: 'Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°', dir: 'ltr' },
  'vi': { name: 'Tiáº¿ng Viá»‡t', dir: 'ltr' }
};

const translations = {
  'en': {
    'title': 'Thermodynamic simulation-assisted random forest: Towards explainable fault diagnosis of combustion chamber components of marine diesel engines',
    'nav_scholar': 'Minghang Zhao (Google Scholar)', 'nav_paper': 'Paper', 'nav_dataset': 'Dataset',
    'affiliations_a': 'Department of Mechanical Engineering, Harbin Institute of Technology, Weihai 264209, China',
    'affiliations_b': 'School of Mechatronics Engineering, Harbin Institute of Technology, Harbin 150001, China',
    'affiliations_c': 'School of Mechanical Engineering, Southwest Jiaotong University, Chengdu 610031, China',
    'affiliations_d': 'College of Mechanical Engineering, Chongqing University of Technology, Chongqing 400054, China',
    'abstract_title': 'Abstract',
    'abstract_p1': 'Aiming at the challenges that traditional intelligent fault diagnosis methods of marine diesel engines often suffer low generalizability due to the lack of fault training samples, as well as poor explainability due to the insufficient incorporation of domain knowledge on fault mechanism, this paper develops a Thermodynamic Simulation-assisted Random Forest (TSRF).',
    'abstract_p2': 'The method reveals fault characteristics through thermodynamic simulations and incorporates them as prior knowledge when designing the intelligent fault diagnosis model. Firstly, five thermodynamic fault models are developed by fine-tuning the essential system parameters to correspond with the distinct attributes of different faults. Then, potential thermodynamic indicators of combustion chamber component degradation are identified through numerical simulation results.',
    'abstract_p3': 'By calculating SHapley Additive explanations (SHAP) values, a parameter selection process is conducted to retain only those variables demonstrating significant correlations with fault states. Finally, the selected parameters are leveraged to assess the condition of the combustion chamber. The proposed TSRF achieved exceptional classification performance, illustrating a mean accuracy of 99.07% on the fault dataset.',
    'keywords_label': 'Keywords:',
    'motivation_title': 'Motivation',
    'motivation_p1': 'In the fields of marine engineering and Prognostics and Health Management (PHM), the industry faces two persistent bottlenecks:',
    'motivation_li1': 'Data Scarcity: Marine engines are high-value assets that are rarely operated to failure. This results in a critical shortage of the labeled "fault data" necessary to train robust machine learning models.',
    'motivation_li2': 'The "Black Box" Problem: Deep learning models often lack transparency. If an AI diagnoses a fault but cannot explain the physical reasoning, it is difficult for engineers to trust it. This lack of interpretability is a primary obstacle to widespread industry adoption.',
    'motivation_p2': 'To overcome these challenges, we introduce TSRF. By fusing physics-based mechanism models with advanced XAI techniques, we address the data scarcity problem through massive synthetic data generation and ensure that diagnostic decisions align with thermodynamic principles.',
    'methodology_title': 'Methodology',
    'methodology_intro': 'Our workflow consists of four distinct stages, as illustrated below:',
    'method_1_title': 'Thermodynamic Modeling:', 'method_1_text': 'Rather than relying solely on physical test rigs, we constructed a high-fidelity 1-D thermodynamic model of a 6-cylinder marine diesel engine. The model was rigorously calibrated using real-world operational data, keeping simulation errors within 5%.',
    'method_2_title': 'Fault Injection:', 'method_2_text': 'Using the calibrated model, we simulated five specific combustion chamber faults (e.g., Head Cracking, Piston Ablation) by fine-tuning physical parameters. This enabled the generation of a comprehensive dataset covering scenarios that are impossible to capture from a real engine.',
    'method_3_title': 'Feature Selection via SHAP:', 'method_3_text': 'We utilized SHAP values to quantitatively identify the critical featuresâ€”specifically, the 14 key parameters that drive the diagnostic decision.',
    'method_4_title': 'Classification:', 'method_4_text': 'A Random Forest (RF) classifier was trained using this physics-enhanced dataset to achieve high diagnostic precision.',
    'fig1_label': 'Figure 1:', 'fig1_caption': 'The structure of our proposed TSRF method.',
    'thermo_details_title': 'Thermodynamic Modeling Details',
    'thermo_details_intro': 'To ensure high fidelity, we constructed a one-dimensional (1-D) operational cycle simulation. This mechanism model balances physical accuracy with the computational efficiency required for large-scale dataset generation.',
    'topo_title': 'Model Topology',
    'topo_intro': 'The engine is discretized into a network of flow pipes and functional components:',
    'topo_li1': 'Core Power Unit: 6-cylinder, 2-stroke inline configuration.',
    'topo_li2': 'Air Path System: Intake/Exhaust manifolds (PL1, PL2) connected via complex piping networks.',
    'topo_li3': 'Boosting System: Turbocharger (TC1) coupled with an intercooler (CO1).',
    'calib_title': 'Calibration & Validation',
    'calib_intro': 'Before fault injection, the baseline model was rigorously calibrated against empirical data.',
    'calib_li1': 'Data Source: Real-world vessel data acquired via Data Collecting Module (DCM).',
    'calib_li2': 'Validation: The deviation for critical parameters (e.g., Power, Exhaust Temp) was maintained within a Â±5% error margin.',
    'fig2_label': 'Figure 2:', 'fig2_caption': 'One-dimensional thermodynamic model of the diesel engine.',
    'fig5_label': 'Figure 5:', 'fig5_caption': 'Data Collecting Module (DCM).',
    'fault_mech_title': 'Fault Injection Mechanism',
    'fault_mech_intro': 'Since 1-D models cannot directly represent 3D structural defects, we employed a phenomenological mapping approach, translating physical degradation mechanisms into equivalent thermodynamic parameter shifts.',
    'fault_table_h1': 'Fault Type', 'fault_table_h2': 'Physical Mechanism', 'fault_table_h3': 'Modeling Implementation',
    'fault_f1_name': 'F1: Head Cracking', 'fault_f1_mech': 'Disrupted thermal conduction.', 'fault_f1_impl': 'Elevating Cylinder Head Surface Temp to 346Â°C.',
    'fault_f2_name': 'F2: Piston Ablation', 'fault_f2_mech': 'Material loss & seal compromise.', 'fault_f2_impl': 'Increasing Piston Temp + minor blow-by.',
    'fault_f3_name': 'F3: Liner Wear', 'fault_f3_mech': 'Abrasive wear increases bore.', 'fault_f3_impl': 'Increasing Bore Diameter + substantial blow-by.',
    'fault_f4_name': 'F4: Ring Wear', 'fault_f4_mech': 'Gas leakage only.', 'fault_f4_impl': 'Modulation of Blow-by Mass Flow Rate.',
    'fault_f5_name': 'F5: Ring Sticking', 'fault_f5_mech': 'Friction & seal failure.', 'fault_f5_impl': 'Bore Dia. change + Elevated Liner Temp + Blow-by.',
    'explain_title': 'Explainability Analysis',
    'explain_intro': 'A key innovation of our work is shifting the focus from "What is the fault?" to "Why is this the fault?". We demonstrate this capability through a case study on Piston Ring Wear (F4):',
    'explain_li1': 'Local Interpretation (Waterfall Plot): The waterfall plot explains specific predictions. For instance, the model predicts "Ring Wear" because Blow-by Heat Flow (P06) and Blow-by Mass Flow (P07) exhibit specific values that increase the probability. This aligns with physics: ring wear compromises the seal, leading to gas leakage (blow-by).',
    'explain_li2': 'Global Interpretation (Beeswarm Plot): Global analysis reveals the general rules learned by the model. We found that low values of Pre-turbo Exhaust Pressure (P11) are strong indicators of Ring Wear. Physically, this is consistent: worn rings allow gas to leak from the cylinder, reducing the energy available to the turbine.',
    'fig11_label': 'Figure 11:', 'fig11_caption': 'Fault analysis of piston ring wear (F4) based on SHAP values.',
    'code_view_text': 'Click to view SHAP Visualization Code (Python)',
    'highlights_title': 'Research Highlights',
    'highlight_1': 'Performs parameterized modeling of five faults in marine diesel engine combustion chamber.',
    'highlight_2': 'Evaluated the effectiveness of SHAP method through comparison with multiple feature selection methods.',
    'highlight_3': 'A novel insight into interpretable fault diagnosis is provided by integrating data-driven method with thermodynamic model.',
    'citation_title': 'Citation',
    'citation_prompt': 'If you find this work useful for your research, please consider citing ðŸ˜Š'
  },
  'zh-CN': {
    'title': 'çƒ­åŠ›å­¦ä»¿çœŸè¾…åŠ©éšæœºæ£®æž—ï¼šé¢å‘èˆ¹èˆ¶æŸ´æ²¹æœºç‡ƒçƒ§å®¤éƒ¨ä»¶çš„å¯è§£é‡Šæ€§æ•…éšœè¯Šæ–­',
    'nav_scholar': 'èµµåæ‰¬ (Google Scholar)', 'nav_paper': 'è®ºæ–‡', 'nav_dataset': 'æ•°æ®é›†',
    'affiliations_a': 'å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ï¼ˆå¨æµ·ï¼‰æœºæ¢°å·¥ç¨‹ç³»ï¼Œä¸­å›½ å¨æµ· 264209',
    'affiliations_b': 'å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦æœºç”µå·¥ç¨‹å­¦é™¢ï¼Œä¸­å›½ å“ˆå°”æ»¨ 150001',
    'affiliations_c': 'è¥¿å—äº¤é€šå¤§å­¦æœºæ¢°å·¥ç¨‹å­¦é™¢ï¼Œä¸­å›½ æˆéƒ½ 610031',
    'affiliations_d': 'é‡åº†ç†å·¥å¤§å­¦æœºæ¢°å·¥ç¨‹å­¦é™¢ï¼Œä¸­å›½ é‡åº† 400054',
    'abstract_title': 'æ‘˜è¦',
    'abstract_p1': 'é’ˆå¯¹èˆ¹èˆ¶æŸ´æ²¹æœºä¼ ç»Ÿæ™ºèƒ½æ•…éšœè¯Šæ–­æ–¹æ³•å› ç¼ºä¹æ•…éšœæ ·æœ¬è€Œæ™®éå­˜åœ¨æ³›åŒ–èƒ½åŠ›ä½Žï¼Œä»¥åŠå› å¯¹æ•…éšœæœºç†é¢†åŸŸçŸ¥è¯†èžåˆä¸è¶³è€Œå¯¼è‡´å¯è§£é‡Šæ€§å·®çš„æŒ‘æˆ˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§çƒ­åŠ›å­¦ä»¿çœŸè¾…åŠ©éšæœºæ£®æž—ï¼ˆTSRFï¼‰æ–¹æ³•ã€‚',
    'abstract_p2': 'è¯¥æ–¹æ³•é€šè¿‡çƒ­åŠ›å­¦ä»¿çœŸæ­ç¤ºæ•…éšœç‰¹å¾ï¼Œå¹¶å°†å…¶ä½œä¸ºå…ˆéªŒçŸ¥è¯†èžå…¥æ™ºèƒ½æ•…éšœè¯Šæ–­æ¨¡åž‹çš„è®¾è®¡ä¸­ã€‚é¦–å…ˆï¼Œé€šè¿‡å¾®è°ƒå…³é”®ç³»ç»Ÿå‚æ•°ä»¥å¯¹åº”ä¸åŒæ•…éšœçš„æ˜¾è‘—å±žæ€§ï¼Œå»ºç«‹äº†äº”ç§çƒ­åŠ›å­¦æ•…éšœæ¨¡åž‹ã€‚éšåŽï¼Œé€šè¿‡æ•°å€¼æ¨¡æ‹Ÿç»“æžœç¡®å®šäº†ç‡ƒçƒ§å®¤éƒ¨ä»¶é€€åŒ–çš„æ½œåœ¨çƒ­åŠ›å­¦æŒ‡æ ‡ã€‚',
    'abstract_p3': 'é€šè¿‡è®¡ç®— SHAP å€¼è¿›è¡Œå‚æ•°ç­›é€‰ï¼Œä»…ä¿ç•™ä¸Žæ•…éšœçŠ¶æ€æ˜¾è‘—ç›¸å…³çš„å˜é‡ã€‚æœ€åŽï¼Œåˆ©ç”¨ç­›é€‰å‡ºçš„å‚æ•°è¯„ä¼°ç‡ƒçƒ§å®¤çš„çŠ¶æ€ã€‚æå‡ºçš„ TSRF æ–¹æ³•å®žçŽ°äº†å“è¶Šçš„åˆ†ç±»æ€§èƒ½ï¼Œåœ¨æ•…éšœæ•°æ®é›†ä¸Šçš„å¹³å‡å‡†ç¡®çŽ‡è¾¾åˆ° 99.07%ã€‚',
    'keywords_label': 'å…³é”®è¯ï¼š',
    'motivation_title': 'ç ”ç©¶åŠ¨æœº',
    'motivation_p1': 'åœ¨èˆ¹èˆ¶å·¥ç¨‹å’Œæ•…éšœé¢„æµ‹ä¸Žå¥åº·ç®¡ç†ï¼ˆPHMï¼‰é¢†åŸŸï¼Œè¡Œä¸šé¢ä¸´ä¸¤å¤§é•¿æœŸç“¶é¢ˆï¼š',
    'motivation_li1': 'æ•°æ®ç¨€ç¼ºï¼šèˆ¹èˆ¶å‘åŠ¨æœºå±žäºŽé«˜ä»·å€¼èµ„äº§ï¼Œæžå°‘è¿è¡Œè‡³å¤±æ•ˆã€‚è¿™å¯¼è‡´è®­ç»ƒé²æ£’æœºå™¨å­¦ä¹ æ¨¡åž‹æ‰€éœ€çš„æ ‡æ³¨â€œæ•…éšœæ•°æ®â€ä¸¥é‡çŸ­ç¼ºã€‚',
    'motivation_li2': 'â€œé»‘ç®±â€é—®é¢˜ï¼šæ·±åº¦å­¦ä¹ æ¨¡åž‹å¾€å¾€ç¼ºä¹é€æ˜Žåº¦ã€‚å¦‚æžœ AI è¯Šæ–­å‡ºæ•…éšœå´æ— æ³•è§£é‡Šç‰©ç†åŽŸå› ï¼Œå·¥ç¨‹å¸ˆå¾ˆéš¾ä¿¡ä»»å®ƒã€‚',
    'motivation_p2': 'ä¸ºäº†å…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬å¼•å…¥äº† TSRFã€‚é€šè¿‡å°†åŸºäºŽç‰©ç†çš„æœºç†æ¨¡åž‹ä¸Žå…ˆè¿›çš„ XAI æŠ€æœ¯èžåˆï¼Œè§£å†³äº†æ•°æ®ç¨€ç¼ºé—®é¢˜ï¼Œå¹¶ç¡®ä¿è¯Šæ–­å†³ç­–ç¬¦åˆçƒ­åŠ›å­¦åŽŸç†ã€‚',
    'methodology_title': 'æ–¹æ³•è®º',
    'methodology_intro': 'æˆ‘ä»¬çš„å·¥ä½œæµç¨‹åŒ…å«å››ä¸ªä¸åŒé˜¶æ®µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š',
    'method_1_title': 'çƒ­åŠ›å­¦å»ºæ¨¡ï¼š', 'method_1_text': 'æˆ‘ä»¬ä¸å•çº¯ä¾èµ–ç‰©ç†è¯•éªŒå°ï¼Œè€Œæ˜¯æž„å»ºäº† 6 ç¼¸èˆ¹èˆ¶æŸ´æ²¹æœºçš„é«˜ä¿çœŸä¸€ç»´çƒ­åŠ›å­¦æ¨¡åž‹ã€‚è¯¥æ¨¡åž‹ä½¿ç”¨çœŸå®žè¿è¡Œæ•°æ®è¿›è¡Œäº†ä¸¥æ ¼æ ‡å®šï¼Œä»¿çœŸè¯¯å·®æŽ§åˆ¶åœ¨ 5% ä»¥å†…ã€‚',
    'method_2_title': 'æ•…éšœæ³¨å…¥ï¼š', 'method_2_text': 'åˆ©ç”¨æ ‡å®šåŽçš„æ¨¡åž‹ï¼Œé€šè¿‡å¾®è°ƒç‰©ç†å‚æ•°æ¨¡æ‹Ÿäº†äº”ç§ç‰¹å®šçš„ç‡ƒçƒ§å®¤æ•…éšœï¼ˆå¦‚æ°”ç¼¸ç›–è£‚çº¹ã€æ´»å¡žçƒ§èš€ï¼‰ã€‚è¿™ä½¿å¾—ç”Ÿæˆæ¶µç›–çœŸå®žå‘åŠ¨æœºéš¾ä»¥æ•æ‰çš„æžç«¯å·¥å†µçš„ç»¼åˆæ•°æ®é›†æˆä¸ºå¯èƒ½ã€‚',
    'method_3_title': 'åŸºäºŽ SHAP çš„ç‰¹å¾é€‰æ‹©ï¼š', 'method_3_text': 'æˆ‘ä»¬åˆ©ç”¨ SHAP å€¼å®šé‡è¯†åˆ«å…³é”®ç‰¹å¾â€”â€”å…·ä½“æ¥è¯´ï¼Œå³é©±åŠ¨è¯Šæ–­å†³ç­–çš„ 14 ä¸ªå…³é”®å‚æ•°ã€‚',
    'method_4_title': 'åˆ†ç±»ï¼š', 'method_4_text': 'ä½¿ç”¨è¯¥ç‰©ç†å¢žå¼ºæ•°æ®é›†è®­ç»ƒéšæœºæ£®æž— (RF) åˆ†ç±»å™¨ï¼Œä»¥å®žçŽ°é«˜è¯Šæ–­ç²¾åº¦ã€‚',
    'fig1_label': 'å›¾ 1ï¼š', 'fig1_caption': 'æå‡ºçš„ TSRF æ–¹æ³•ç»“æž„ç¤ºæ„å›¾ã€‚',
    'thermo_details_title': 'çƒ­åŠ›å­¦å»ºæ¨¡ç»†èŠ‚',
    'thermo_details_intro': 'ä¸ºç¡®ä¿é«˜ä¿çœŸåº¦ï¼Œæˆ‘ä»¬æž„å»ºäº†ä¸€ç»´ (1-D) è¿è¡Œå¾ªçŽ¯ä»¿çœŸã€‚è¯¥æœºç†æ¨¡åž‹åœ¨ç‰©ç†ç²¾åº¦ä¸Žå¤§è§„æ¨¡æ•°æ®é›†ç”Ÿæˆæ‰€éœ€çš„è®¡ç®—æ•ˆçŽ‡ä¹‹é—´å–å¾—äº†å¹³è¡¡ã€‚',
    'topo_title': 'æ¨¡åž‹æ‹“æ‰‘',
    'topo_intro': 'å‘åŠ¨æœºè¢«ç¦»æ•£åŒ–ä¸ºæµä½“ç®¡ç½‘å’ŒåŠŸèƒ½ç»„ä»¶ï¼š',
    'topo_li1': 'æ ¸å¿ƒåŠ¨åŠ›å•å…ƒï¼š6 ç¼¸ã€2 å†²ç¨‹ç›´åˆ—é…ç½®ã€‚',
    'topo_li2': 'æ°”è·¯ç³»ç»Ÿï¼šè¿›/æŽ’æ°”æ­§ç®¡ (PL1, PL2) é€šè¿‡å¤æ‚çš„ç®¡ç½‘è¿žæŽ¥ã€‚',
    'topo_li3': 'å¢žåŽ‹ç³»ç»Ÿï¼šæ¶¡è½®å¢žåŽ‹å™¨ (TC1) ä¸Žä¸­å†·å™¨ (CO1) è€¦åˆã€‚',
    'calib_title': 'æ ‡å®šä¸ŽéªŒè¯',
    'calib_intro': 'åœ¨æ•…éšœæ³¨å…¥ä¹‹å‰ï¼ŒåŸºå‡†æ¨¡åž‹å·²é’ˆå¯¹ç»éªŒæ•°æ®è¿›è¡Œäº†ä¸¥æ ¼æ ‡å®šã€‚',
    'calib_li1': 'æ•°æ®æ¥æºï¼šé€šè¿‡æ•°æ®é‡‡é›†æ¨¡å— (DCM) èŽ·å–çš„çœŸå®žèˆ¹èˆ¶æ•°æ®ã€‚',
    'calib_li2': 'éªŒè¯ï¼šå…³é”®å‚æ•°ï¼ˆå¦‚åŠŸçŽ‡ã€æŽ’æ°”æ¸©åº¦ï¼‰çš„åå·®ä¿æŒåœ¨ Â±5% çš„è¯¯å·®èŒƒå›´å†…ã€‚',
    'fig2_label': 'å›¾ 2ï¼š', 'fig2_caption': 'æŸ´æ²¹æœºä¸€ç»´çƒ­åŠ›å­¦æ¨¡åž‹ã€‚',
    'fig5_label': 'å›¾ 5ï¼š', 'fig5_caption': 'æ•°æ®é‡‡é›†æ¨¡å— (DCM)ã€‚',
    'fault_mech_title': 'æ•…éšœæ³¨å…¥æœºç†',
    'fault_mech_intro': 'ç”±äºŽä¸€ç»´æ¨¡åž‹æ— æ³•ç›´æŽ¥è¡¨ç¤º 3D ç»“æž„ç¼ºé™·ï¼Œæˆ‘ä»¬é‡‡ç”¨å”¯è±¡æ˜ å°„æ–¹æ³•ï¼Œå°†ç‰©ç†é€€åŒ–æœºåˆ¶è½¬åŒ–ä¸ºç­‰æ•ˆçš„çƒ­åŠ›å­¦å‚æ•°åç§»ã€‚',
    'fault_table_h1': 'æ•…éšœç±»åž‹', 'fault_table_h2': 'ç‰©ç†æœºç†', 'fault_table_h3': 'å»ºæ¨¡å®žçŽ°',
    'fault_f1_name': 'F1: æ°”ç¼¸ç›–è£‚çº¹', 'fault_f1_mech': 'çƒ­ä¼ å¯¼ä¸­æ–­ã€‚', 'fault_f1_impl': 'å°†æ°”ç¼¸ç›–è¡¨é¢æ¸©åº¦æå‡è‡³ 346Â°Cã€‚',
    'fault_f2_name': 'F2: æ´»å¡žçƒ§èš€', 'fault_f2_mech': 'ææ–™æŸå¤±åŠå¯†å°å¤±æ•ˆã€‚', 'fault_f2_impl': 'æé«˜æ´»å¡žæ¸©åº¦ + è½»å¾®çªœæ°”ã€‚',
    'fault_f3_name': 'F3: æ°”ç¼¸å¥—ç£¨æŸ', 'fault_f3_mech': 'ç£¨ç²’ç£¨æŸå¢žåŠ ç¼¸å¾„ã€‚', 'fault_f3_impl': 'å¢žåŠ ç¼¸å¾„ + æ˜¾è‘—çªœæ°”ã€‚',
    'fault_f4_name': 'F4: æ´»å¡žçŽ¯ç£¨æŸ', 'fault_f4_mech': 'ä»…æ°”ä½“æ³„æ¼ã€‚', 'fault_f4_impl': 'è°ƒèŠ‚çªœæ°”è´¨é‡æµé‡ã€‚',
    'fault_f5_name': 'F5: æ´»å¡žçŽ¯ç²˜ç€', 'fault_f5_mech': 'æ‘©æ“¦ä¸Žå¯†å°å¤±æ•ˆã€‚', 'fault_f5_impl': 'ç¼¸å¾„å˜åŒ– + æ°”ç¼¸å¥—æ¸©åº¦å‡é«˜ + çªœæ°”ã€‚',
    'explain_title': 'å¯è§£é‡Šæ€§åˆ†æž',
    'explain_intro': 'æˆ‘ä»¬å·¥ä½œçš„ä¸€ä¸ªå…³é”®åˆ›æ–°åœ¨äºŽå°†ç„¦ç‚¹ä»Žâ€œæ•…éšœæ˜¯ä»€ä¹ˆï¼Ÿâ€è½¬ç§»åˆ°â€œä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªæ•…éšœï¼Ÿâ€ã€‚æˆ‘ä»¬é€šè¿‡æ´»å¡žçŽ¯ç£¨æŸ (F4) çš„æ¡ˆä¾‹å±•ç¤ºäº†è¿™ä¸€èƒ½åŠ›ï¼š',
    'explain_li1': 'å±€éƒ¨è§£é‡Š (ç€‘å¸ƒå›¾)ï¼šç€‘å¸ƒå›¾è§£é‡Šäº†å…·ä½“çš„é¢„æµ‹ã€‚ä¾‹å¦‚ï¼Œæ¨¡åž‹é¢„æµ‹â€œæ´»å¡žçŽ¯ç£¨æŸâ€æ˜¯å› ä¸ºçªœæ°”çƒ­æµ (P06) å’Œçªœæ°”è´¨é‡æµé‡ (P07) è¡¨çŽ°å‡ºç‰¹å®šæ•°å€¼ï¼Œå¢žåŠ äº†æ¦‚çŽ‡ã€‚è¿™ä¸Žç‰©ç†å­¦ä¸€è‡´ï¼šæ´»å¡žçŽ¯ç£¨æŸç ´åäº†å¯†å°ï¼Œå¯¼è‡´æ°”ä½“æ³„æ¼ï¼ˆçªœæ°”ï¼‰ã€‚',
    'explain_li2': 'å…¨å±€è§£é‡Š (èœ‚ç¾¤å›¾)ï¼šå…¨å±€åˆ†æžæ­ç¤ºäº†æ¨¡åž‹å­¦åˆ°çš„é€šç”¨è§„åˆ™ã€‚æˆ‘ä»¬å‘çŽ°æ¶¡è½®å‰æŽ’æ°”åŽ‹åŠ› (P11) çš„ä½Žå€¼æ˜¯æ´»å¡žçŽ¯ç£¨æŸçš„å¼ºæœ‰åŠ›æŒ‡æ ‡ã€‚ç‰©ç†ä¸Šè¿™æ˜¯ä¸€è‡´çš„ï¼šå¦‚æžœæ´»å¡žçŽ¯ç£¨æŸï¼Œæ°”ä½“ä»Žæ°”ç¼¸æ³„æ¼ï¼Œæ„å‘³ç€ç”¨äºŽé©±åŠ¨æ¶¡è½®çš„åºŸæ°”èƒ½é‡å‡å°‘ã€‚',
    'fig11_label': 'å›¾ 11ï¼š', 'fig11_caption': 'åŸºäºŽ SHAP å€¼çš„æ´»å¡žçŽ¯ç£¨æŸ (F4) æ•…éšœåˆ†æžã€‚',
    'code_view_text': 'ç‚¹å‡»æŸ¥çœ‹ SHAP å¯è§†åŒ–ä»£ç  (Python)',
    'highlights_title': 'ç ”ç©¶äº®ç‚¹',
    'highlight_1': 'å¯¹èˆ¹èˆ¶æŸ´æ²¹æœºç‡ƒçƒ§å®¤éƒ¨ä»¶çš„äº”ç§æ•…éšœè¿›è¡Œäº†å‚æ•°åŒ–å»ºæ¨¡ã€‚',
    'highlight_2': 'é€šè¿‡å¯¹æ¯”è¯„ä¼°äº† SHAP æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚',
    'highlight_3': 'é€šè¿‡å°†æ•°æ®é©±åŠ¨æ–¹æ³•ä¸Žçƒ­åŠ›å­¦æ¨¡åž‹ç›¸ç»“åˆï¼Œä¸ºå¯è§£é‡Šæ€§æ•…éšœè¯Šæ–­æä¾›äº†æ–°è§è§£ã€‚',
    'citation_title': 'å¼•ç”¨',
    'citation_prompt': 'å¦‚æžœæ‚¨è§‰å¾—è¿™é¡¹å·¥ä½œå¯¹æ‚¨çš„ç ”ç©¶æœ‰ç”¨ï¼Œè¯·è€ƒè™‘å¼•ç”¨ ðŸ˜Š'
  }
};

// --- Initialization Logic ---

function initLanguageDropdown() {
  const dropdown = document.getElementById('language-dropdown');
  const codes = Object.keys(languages).sort();
  codes.forEach(code => {
    const item = document.createElement('a');
    item.className = 'navbar-item';
    item.textContent = languages[code].name;
    item.onclick = () => setLanguage(code);
    dropdown.appendChild(item);
  });
}

function setLanguage(langCode) {
  if (!languages[langCode]) langCode = 'en';
  document.getElementById('current-lang-label').textContent = languages[langCode].name;
  if (languages[langCode].dir === 'rtl') {
    document.documentElement.setAttribute('dir', 'rtl');
  } else {
    document.documentElement.removeAttribute('dir');
  }
  document.documentElement.lang = langCode;

  const content = translations[langCode] || translations['en'];
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (content[key]) {
      // Allow HTML in certain keys (like lists containing bold text), handle carefully
      if (key.includes('highlight') || key.includes('li') || key.includes('text') || key.includes('intro') || key.includes('caption') || key.includes('mech') || key.includes('impl')) {
          element.innerHTML = content[key];
      } else {
          element.textContent = content[key];
      }
    } else if (translations['en'][key]) {
      // Fallback
      if (key.includes('highlight') || key.includes('li')) {
          element.innerHTML = translations['en'][key];
      } else {
          element.textContent = translations['en'][key];
      }
    }
  });
  localStorage.setItem('preferred-language', langCode);
}

async function detectLocationAndSetLanguage() {
  const savedLang = localStorage.getItem('preferred-language');
  if (savedLang) { setLanguage(savedLang); return; }
  try {
    const response = await fetch('https://ipapi.co/json/');
    const data = await response.json();
    const country = data.country_code;
    const countryMap = {
      'CN': 'zh-CN', 'HK': 'zh-TW', 'TW': 'zh-TW',
      'US': 'en', 'GB': 'en', 'FR': 'fr', 'DE': 'de',
      'RU': 'ru', 'JP': 'ja', 'ES': 'es', 'MX': 'es',
      'SA': 'ar', 'AE': 'ar', 'EG': 'ar',
      'KR': 'ko', 'IT': 'it', 'TR': 'tr', 'TH': 'th',
      'VN': 'vi', 'ID': 'id', 'PL': 'pl', 'PT': 'pt',
      'BR': 'pt', 'IR': 'fa', 'IL': 'he', 'IN': 'hi',
      'NL': 'nl', 'SE': 'sv', 'RO': 'ro', 'UA': 'uk', 'CZ': 'cs'
    };
    setLanguage(countryMap[country] || 'en');
  } catch (error) {
    console.log('IP detection failed, defaulting to English.');
    setLanguage('en');
  }
}

function copyText(elementId, btn) {
  const textToCopy = document.getElementById(elementId).innerText;
  navigator.clipboard.writeText(textToCopy).then(() => {
    const icon = btn.querySelector('.fa-copy');
    const text = btn.querySelector('.btn-text');
    const originalText = text ? text.innerText : "";
    if(icon) { icon.classList.remove('fa-copy'); icon.classList.add('fa-check'); }
    if(text) text.innerText = "Copied!";
    btn.classList.remove('is-dark'); btn.classList.add('is-success');
    setTimeout(() => {
      if(icon) { icon.classList.remove('fa-check'); icon.classList.add('fa-copy'); }
      if(text) text.innerText = originalText;
      btn.classList.remove('is-success'); btn.classList.add('is-dark');
    }, 2000);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  initLanguageDropdown();
  detectLocationAndSetLanguage();
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('active');
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal, .stagger-wrapper').forEach(el => observer.observe(el));
});
</script>

</body>
</html>
